FROM python:3.11-slim-bookworm

WORKDIR /app

# MODERN VE UYUMLU KÜTÜPHANELERİ, TÜM ÇEKİRDEK BAĞIMLILIKLARIYLA BİRLİKTE KUR
# 'openvino', 'optimum[intel]' kütüphanesinin çalışması için zorunludur.
RUN pip install --no-cache-dir \
    "optimum[intel]>=1.16.0" \
    "openvino>=2023.3.0" \
    "transformers>=4.40.0" \
    "huggingface-hub>=0.20.0" \
    "torch>=2.0.0" \
    "accelerate>=0.25.0" --extra-index-url https://download.pytorch.org/whl/cpu

# Kütüphaneler kurulduktan sonra betiği kopyala
COPY ./scripts/convert_model.py .

# Container çalıştığında doğrudan betiği çalıştır
CMD ["python", "convert_model.py"]